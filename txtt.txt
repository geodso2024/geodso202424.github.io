<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="css/styles2.css">
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js';
        import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js';

        document.addEventListener('DOMContentLoaded', function() {
            const firebaseConfig = {
                apiKey: "AIzaSyD26pWZ9AMYoisXfrtm7038K2SuuXuWkr8",
authDomain: "glor-ae49f.firebaseapp.com",
databaseURL: "https://glor-ae49f-default-rtdb.firebaseio.com",
projectId: "glor-ae49f",
storageBucket: "glor-ae49f.appspot.com",
messagingSenderId: "677710403853",
appId: "1:677710403853:web:f67284b068399eebb97844"
            };
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);

            // Adiciona um evento de escuta para o envio do formulário
            document.querySelector('form').addEventListener('submit', async function(event) {
                event.preventDefault(); // Evita o envio do formulário padrão

                const email = document.getElementById('nome_login').value;
                const senha = document.getElementById('email_login').value;

                try {
                    // Autentica o usuário com email e senha usando Firebase Authentication
                    const userCredential = await signInWithEmailAndPassword(auth, email, senha);
                    const user = userCredential.user;
                    console.log('Autenticação bem-sucedida para o usuário:', user.email);

                    // Redireciona o usuário para outra página após autenticação bem-sucedida
                    window.location.href = 'ger-user.html';
                } catch (error) {
                    console.error('Erro na autenticação:', error.message);
                    // Exibe uma mensagem de erro para o usuário, se necessário
                }
            });
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="boxlogin">
            <form>
                <img class="logoim"  src="https://i.im.ge/2024/04/07/WZO69z.logo-sem-fundo.png" alt="">
                <h1 class="h1lo">LOGIN</h1>
                <p>
                    <input class="forlogin" id="nome_login" name="email" type="text" placeholder="Email"/>
                </p>
                <p> 
                    <input class="forlogin" id="email_login" name="senha" type="password" placeholder="Senha" /> 
                </p>
                <p>
                    <input class="btnlogin" type="submit" name="submit" value="Login">
                </p>
                <a href="#" class="recuperar_senha">Esqueceu a senha?</a>
            </form>
        </div>
    </div>    
</body>
</html>
